#1.  Презентация задачи и выбор датасета

### Контекст
Мы создаём цифровой банк‑стартап. В текущем процессе кредитования используются статические правила и эвристики. Это приводит к недоодобрениям «хороших» клиентов и переодобрениям «плохих», снижая Net Interest Income и повышая Cost of Risk. Наша цель — заменить эвристики промышленным ML‑скорингом с объяснимостью, калибровкой вероятности дефолта и операционным SLA, который поможет снизить Cost of Risk, повысить Net Interest Income при управляемом Approval Rate.

### 1. Бизнес‑анализ (Business Understanding)
- Организационная структура и участники
  - C‑level: CRO (Chief Risk Officer), CCO (Chief Commercial Officer)
  - Product/Business: Product Owner (Lending), Head of Lending
  - Risk/Analytics: Head of Risk Analytics, Underwriting Lead
  - Data/ML: Head of ML, ML Engineers, Data Engineers
  - Tech/Интеграции: Backend Lead, CRM/Decision Engine Lead, DevOps/Platform
  - Основные пользователи (2 когорты): андеррайтеры и риск‑аналитики; фронт‑офис и цифровые каналы
- Контакты и рабочие чаты
  - SteerCo (стратегия, 2×/мес), Core WG (еженедельно), Инциденты 24×7, Dev/Integrations канал, канал поставщиков данных
- Бизнес‑цели проекта (SMART)
  - Увеличить NII на +X% за 6 месяцев после запуска ML‑скоринга
  - Повысить Approval Rate на +Y п.п. при CoR ≤ T bps в течение 3 месяцев пилота
- Целевая техническая метрика: AUC‑ROC (приоритет) или Gini; $ \mathrm{Gini} = 2 \times \mathrm{AUC} - 1 $.
- Существующие решения и ограничения
  - Сейчас: эвристики/правила по сегментам, экстраполяция на всех клиентов
  - Проблемы: грубый отбор, отсутствие калиброванной PD, сниженная конверсия, избыточный риск, ручные оверрайды
  - Возможность: ML‑скоринг с лучшей дискриминацией, калибровкой PD, объяснимостью и SLA

### Глоссарий и формулы
- Net Interest Income (NII): $ \mathrm{NII} = \mathrm{Процентные\ доходы} - \mathrm{Процентные\ расходы} $.
- Cost of Risk (CoR): $ \mathrm{CoR} = \frac{\mathrm{Расходы\ на\ резервы}}{\mathrm{Средний\ кредитный\ портфель}} $.
- Approval Rate: $ \mathrm{Approval\ Rate} = \frac{\mathrm{Одобренные\ заявки}}{\mathrm{Все\ заявки}} $.
- AUC‑ROC: площадь под ROC‑кривой (0.5–1.0).
- Gini: $ \mathrm{Gini} = 2 \times \mathrm{AUC} - 1 $.

#### 1.1 Текущая ситуация (Assessing current solution)
В первую очередь оцениваем, хватает ли ресурсов для проекта и нет ли критических ограничений.

- Ресурсы и железо
  - Предполагаем, что выделенного железа под ML нет: обучение моделей проводится на арендованных/облачных ресурсах, инференс — на небольшом кластере CPU‑серверов с низкой латентностью. Также рассматривается вариант дообучения предобученных моделей.
- Данные и хранилища
  - Операционные и исторические данные по заявкам и клиентам хранятся в SQL‑базе PostgreSQL; Redis используется для реалтайм‑джобов и кеширования признаков/решений.
  - Для улучшения качества скоринга целесообразно подключать внешние источники по мере их доступности: кредитные бюро/КИ, открытые данные ЦБ РФ, государственную и отраслевую статистику (Росстат, ФНС, реестры), доступные по закону антифрод‑сигналы.
  - Для обучения мы возьмем данные из анкетных данных заемщиков (пол, возраст, наличие автомобиля, доход и пр.) и факт наличия дефолта у заемщика (просрочка по кредиту более 90 дней). Факт просрочки сильно коррелирует с целевой бизнесовой метрикой NII. 
- Экспертиза заказчика
  - В проектной команде есть андеррайтеры и риск‑аналитики, которые смогут консультировать по бизнесовым вопросам на всех этапах реализации аналитического решения.
- Вероятные риски проекта и план действий по их уменьшению
  - Не уложиться в сроки.
    - План действий: согласованный роадмап с понятными задачами и сроками, фиксация ответственных и еженедельные синки для отслеживания отклонений.
  - Малое количество или плохое качество данных.
    - План действий: ранний аудит данных, очистка и предпроцессинг (обработка пропусков, выбросов, дубликатов), при необходимости — ручная разметка/оценка части данных.
  - Данные качественные, но закономерности отсутствуют либо слишком слабые.
    - План действий: поиск альтернативных источников данных и признаков; в крайнем случае — оставить и формализовать улучшенное эвристическое решение, чтобы архитектура позволяла в будущем достаточно безболезненно заменить его ML‑моделью.

#### 1.2 Решаемые задачи с точки зрения аналитики (Data Mining goals)
Задачу формулируем в технических терминах и заранее определяем, как именно будем измерять успех.

- Тип задачи
  - Бинарная классификация: для каждой заявки оцениваем вероятность дефолта (PD) и принимаем решение по порогу (scorecut). Выставляя пороги можно получать различные Precision и Recall, тем самым балансируя между NII и Aproval Rate в зависимости от потребностей бизнеса.
- Метрики для оценки результата моделирования
  - Основная метрика: AUC‑ROC (или Gini как производная от AUC), а также бизнес‑метрики, описанные выше.
  - Дополнительные метрики, которые можно анализировать: Precision/Recall, F‑мера, PR‑AUC, Logloss/BrierScore.
- Критерий успешности модели
  - Технические метрики: считать модель приемлемой при AUC ≥ 0.65, хорошей при AUC ≥ 0.75, отличной при AUC ≥ 0.85 (конкретные пороги будут уточнены в процессе реализации).
  - Метрики бизнеса: модель должна повышать Approval Rate при контроле Cost of Risk (не хуже заданного порога).
- Если объективный критерий качества не используется
  - В этом случае результаты оцениваются экспертно: сравнение с текущими правилами/эвристиками на ретро‑данных, ревью выборочных кейсов андеррайтерами и проверка, что модель не даёт заведомо абсурдных решений.

#### 1.3 План проекта (Project Plan)
Этот проект можно описать как путь по фазам жизненного цикла ML‑модели, опираясь на [классический подход](https://neerc.ifmo.ru/wiki/index.php?title=%D0%96%D0%B8%D0%B7%D0%BD%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D1%86%D0%B8%D0%BA%D0%BB_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BE%D0%B1%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D1%8F).

- **Фаза 1. Бизнес‑анализ**
  - Стартап‑банк живёт на статических правилах, из‑за чего теряет NII и повышает CoR: недоодобряет «хороших» клиентов и переодобряет «плохих».
  - Цель проекта — внедрить ML‑скоринг, который по анкетным данным клиента оценивает вероятность дефолта (просрочка > 90 дней), управляет балансом между NII и Approval Rate и вписывается в ограничения по ресурсам и данным.

- **Фаза 2. Анализ и подготовка данных**
  - Мы опираемся на имеющуюся инфраструктуру: исторические заявки и факты дефолтов в PostgreSQL, Redis для реалтайма, при необходимости — внешние источники (КИ, ЦБ РФ, статистика, антифрод).
  - Выгружаем анкетные признаки и таргет, изучаем объём, качество, дисбаланс классов и наличие закономерностей; очищаем данные, обрабатываем пропуски и выбросы, кодируем категориальные признаки и собираем финальный набор признаков.
  - Разбиваем данные на train/validation/test (с учётом времени), чтобы честно оценивать модель в условиях, близких к реальному применению.

- **Фаза 3. Моделирование**
  - Стартуем с простой интерпретируемой модели (логистическая регрессия) и добавляем более сложные варианты (деревья, бустинг), подбирая гиперпараметры.
  - Основная метрика качества — AUC‑ROC/Gini; дополнительно смотрим Precision, Recall, F‑меру, Logloss/BrierScore, чтобы понять поведение модели при разных порогах.

- **Фаза 4. Оценка решения**
  - На тестовой выборке сравниваем модель с текущими эвристиками: как меняется доля дефолтов среди одобренных и отклонённых и как это транслируется в NII, CoR и Approval Rate.
  - Интерпретируем модель: анализируем важность признаков и проверяем на выборочных кейсах с андеррайтерами, что решения выглядят разумно.

- **Фаза 5. Внедрение**
  - Упаковываем модель в учебный прототип сервиса (скрипт или API), который принимает данные клиента и возвращает скоринговый балл и рекомендуемое решение (одобрить/отказать/на ручную проверку).
  - На уровне концепции описываем, как такой сервис мог бы быть встроен в процесс выдачи кредитов стартап‑банка (какие системы его вызывают, где хранятся результаты).

- **Фаза 6. Тестирование и мониторинг**
  - Продумываем, какие проверки нужны при изменении модели: сравнение с предыдущей версией на одном и том же сете заявок, проверка времени отклика и устойчивости сервиса.
  - Формируем набор ключевых метрик для мониторинга после гипотетического запуска (AUC/Gini, дрейф данных, Approval Rate, CoR) и описываем, как по этим сигналам принимать решения о переобучении и доработках модели.
